<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adachi Image Selector</title>
    <style>
        .image-container {
            text-align: center;
            margin-top: 20px;
        }
        .comic-text {
            font-family: "Comic Sans MS", cursive, sans-serif;
            font-size: 20px;
            margin-top: 10px;
        }
        .options, .search {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center;">Adachi Image Selector</h1>

    <div class="search">
        <input type="text" id="searchInput" placeholder="Search for an image type...">
        <input type="text" id="secondaryTagInput" placeholder="Enter a secondary tag...">
        <button onclick="searchImages()">Search</button>
    </div>

    <div class="image-container">
        <img id="mainImage" src="images/adachi_shadow_menacing.png" alt="Adachi Image" style="width: 300px; height: auto; cursor: pointer;" onclick="showOptions()">
        <div class="comic-text" id="textOverlay" contenteditable="true" style="color: black;">Your Comic Text Here</div>
    </div>

    <div class="options" id="options" style="display: none;">
        <p>Choose an image:</p>
        <select id="imageSelector" onchange="changeImage()">
            <!-- Options will be populated dynamically by JavaScript -->
        </select>
        <p>Change text color:</p>
        <input type="color" id="textColorPicker" onchange="changeTextColor()">
    </div>

    <button onclick="saveImage()">Save Image</button>

    <script>
        // Array of image objects with primary and secondary tags
        const images = [
            { src: "images/adachi_shadow_menacing.png", primaryTag: "shadow", secondaryTag: "menacing" },
            { src: "images/adachi_worried_blush.png", primaryTag: "worried", secondaryTag: "blush" }
        ];

        // Function to search and filter images based on tags
        function searchImages() {
            const primaryQuery = document.getElementById('searchInput').value.toLowerCase();
            const secondaryQuery = document.getElementById('secondaryTagInput').value.toLowerCase();
            
            // Filter images based on the queries
            const filteredImages = images.filter(image => 
                image.primaryTag.includes(primaryQuery) && 
                image.secondaryTag.includes(secondaryQuery)
            );

            // Update the image selector with filtered images
            const imageSelector = document.getElementById('imageSelector');
            imageSelector.innerHTML = ""; // Clear current options

            filteredImages.forEach(image => {
                const option = document.createElement('option');
                option.value = image.src;
                option.textContent = `${image.primaryTag} - ${image.secondaryTag}`;
                imageSelector.appendChild(option);
            });

            // Change the image to the first filtered result (if any)
            if (filteredImages.length > 0) {
                document.getElementById('mainImage').src = filteredImages[0].src;
            } else {
                alert("No images found with the specified tags.");
            }
        }

        // Function to change the displayed image
        function changeImage() {
            const imageSelector = document.getElementById('imageSelector');
            const selectedImage = imageSelector.value;
            document.getElementById('mainImage').src = selectedImage;
        }

        // Function to show the options
        function showOptions() {
            document.getElementById('options').style.display = "block";
        }

        // Function to change the text color
        function changeTextColor() {
            const color = document.getElementById('textColorPicker').value;
            document.getElementById('textOverlay').style.color = color;
        }

        // Function to save the image (this functionality requires a bit more work with canvas)
        function saveImage() {
            alert("Saving images requires additional functionality to be implemented with HTML canvas.");
        }
    </script>
</body>
</html>
